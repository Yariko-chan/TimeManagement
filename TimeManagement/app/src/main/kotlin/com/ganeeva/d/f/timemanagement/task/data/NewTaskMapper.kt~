package com.ganeeva.d.f.timemanagement.task.data

import com.ganeeva.d.f.timemanagement.core.Mapper
import com.ganeeva.d.f.timemanagement.db.task.DbTask
import com.ganeeva.d.f.timemanagement.new_task.domain.NewTask

class NewTaskMapper: Mapper<NewTask, List<DbTask>>() {

    override fun map(from: NewTask): List<DbTask> {
        val tasks = mutableListOf<DbTask>()
        val mainTask = DbTask(
            name = from.name,
            description = from.description,
            creationDate = System.currentTimeMillis()
        )
        tasks += mainTask
        from.subtasks?.forEach {
            tasks += DbTask(
                name= it,
                parentTaskID = mainTask.taskId
            )
        }
        return tasks
    }
}